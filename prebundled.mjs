class t{static T=t=>new Promise((e=>setTimeout(e,t)));static IA=t=>"AsyncFunction"===t.constructor.name}class e{D;constructor(t,e=!1){this.D=[t,e]}}class s{Q=[];IR=!1;A=t=>{this.P(t),this.IR||this.R()};P=t=>{this.Q.push(t.D)};R=async()=>{for(this.IR=!0;0!==this.Q.length;)for(let e=0;e<this.Q.length;e++){const[s,i]=this.Q[e];if(this.Q.shift(),i&&await t.T(i),t.IA(s)){await s();break}s();break}this.IR=!1}}const i=new class{S=null;QH=new s;D=!1;P="hf_ss-binded_viewport";PX="hf_ss-binded_viewport_on_exit";V="hf_ss-binded_value";LC="hf_ss-binded_lifecycle"};class n{E;first=!0;constructor(t){this.E=t,i.QH.A(new e((async()=>{i.S=t,await t(this.first),this.first=!1,i.S=null}),i.D))}}const o=async(t,...e)=>{await Promise.all(t.map((async t=>{try{return await t(...e)}catch(t){throw console.error("Error in callback:",t),t}}))).catch((t=>{console.error("Promise.all failed:",t)}))};class r{removeAll$=()=>{this.S=[]};remove$=t=>{this.S=this.S.filter((e=>t.E!==e))};S=[];V_;call$=()=>{this.S.length&&i.QH.A(new e((async()=>{await o(this.S,!1)}),i.D))};constructor(t,e=void 0,s=void 0){this.V_=t,e&&new n((async()=>{((t,e,s,n)=>{const o=Array.from(s.querySelectorAll(`[${e}]`));if(s instanceof ShadowRoot||s instanceof Document||!s.hasAttribute(e)||o.push(s),o)for(let s=0;s<o.length;s++){const r=o[s],a=(r.getAttribute(e)??"").split(";");for(let s=0;s<a.length;s++){const o=a[s];try{if(!(o in r))throw"";if(r[o]=t,"value"===o&&"value"in r&&r.parentNode&&r instanceof HTMLInputElement&&!r.hasAttribute(i.V)){r.setAttribute(i.V,"");const t=()=>{n.value=r.value};r.addEventListener("input",t),new MutationObserver(((e,s)=>{for(let i of e)if("childList"===i.type)for(let e=0;e<i.removedNodes.length;e++)if(i.removedNodes[e]===r)return r.removeEventListener("input",t),void s.disconnect()})).observe(r.parentNode,{childList:!0})}}catch(s){if(t=JSON.stringify(t).replace(/^"(.*)"$/,"$1"),""==o)return void console.warn({element:r,attributeName:e,message:"doesn't have target"});r.setAttribute(o,t)}}}})(this.value,e,s??document,this)}))}get value(){return i.S&&!this.S.some((t=>t===i.S))&&this.S.push(i.S),this.V_}set value(t){this.V_!==t&&(this.V_=t,this.call$())}}class a{static __;constructor(){a.__ instanceof a||(a.__=this,this.documentMutation_=new r(""),this.documentObserver=new MutationObserver((t=>{t.forEach((t=>{this.documentMutation_.value=t}))})),this.documentObserver.observe(document,{childList:!0,subtree:!0}))}}window.Lifecycle=class{$;AL;DS;O;ML;constructor(t,e=document){this.AL=t,this.DS=e,e===document?(a.__ instanceof a||new a,this.O=a.__.documentObserver,this.ML=a.__.documentMutation_):(this.ML=new r(""),this.O=new MutationObserver((t=>{this.ML.value=t})),this.O.observe(e,{childList:!0,subtree:!0})),this.$=new n((async()=>{this.ML.value,await this.CE()}))}DC={};CE=async()=>{for(const t in this.AL){const e=this.AL[t],s=this.DS.querySelectorAll(`[${t}]`);for(let n=0;n<s.length;n++){const o=s[n];if(!o.hasAttribute(i.LC)){o.setAttribute(i.LC,"");const s=`${t}="${o.getAttribute(t)??""}"`;this.DC[s]=await e(o,this.unObserve)}}}for(const t in this.DC){const e=this.DC[t];this.DS.querySelector(`[${t}]`)||(await e(),delete this.DC[t],0===Object.keys(this.DC).length&&this.ML.remove$(this.$))}};unObserve=()=>{i.QH.A(new e((async()=>{if(this.DC){let t=[];for(const e in this.DC)t.push(this.DC[e]);await o(t),this.DC={}}this.ML.remove$(this.$),this.DS!==document&&this.O.disconnect()}),i.D))}},window.Let=r,window.Derived=class extends r{constructor(t,e=void 0,s=void 0){super("",e,s),new n((async()=>{super.value=await t()}))}get value(){return super.value}set value(t){console.warn("you are not allowed to change Derived value manually")}},window.Ping=class{AC;constructor(t){this.AC=t,this.ping(!0)}ping=(t=!1)=>{i.QH.A(new e((async()=>{await this.AC(t)}),i.D))}},window.$=n,window.OnViewPort=class{constructor(t,s,n=(async(t,e)=>{e()}),o=document){const r=o.querySelectorAll(`[${t}]`);if(!r)return;const a=new IntersectionObserver(((t,o)=>{i.QH.A(new e((async()=>{for(let e=0;e<t.length;e++){const r=t[e].target;t[e].isIntersecting?(r.setAttribute(i.PX,""),await s(r)):r.hasAttribute(i.PX)&&await n(r,(()=>o.disconnect()))}}),i.D))}),{threshold:[0,0]});for(let t=0;t<r.length;t++){const e=r[t];if(e.hasAttribute(i.P))return;e.setAttribute(i.P,""),a.observe(e)}}};
